## Решение задачи детектирования поребриков на датасете Toronto-3D

### Настройка виртуального окружения
Для того, чтобы не устанавливать все необходимые библиотеки вручную, предлагается установить виртуальное окружение, параметры которого прописаны в файле environment.yml
1. Создать виртуальное окружение: `conda env create -f environment.yml`
2. Активировать виртуальное окружение: `conda activate curb_detection`

### Запуск программы

Для того, чтобы запустить алгоритм, в командной строке нужно выполнить

`python main.py path_in path_out`

где `path_in` - путь к входным данным, а `path_out`- место, где нужно сохранить .las-файл, получившийся на выходе. Если `path_out` не задана, то файл сохраняется на рабочий стол в соответствии с инструкцией.

### Ход работы программы

Для решения задачи в основном использовались методы из статьи [CurbScan: Curb Detection and Tracking Using Multi-Sensor Fusion [1]](https://arxiv.org/abs/2010.04837), также некоторые детали уточнялись в статье [Road-Segmentation based Curb Detection Method
for Self-driving via a 3D-LiDAR Sensor [2]](https://www.ri.cmu.edu/app/uploads/2019/06/FINAL-VERSION-TITS2018.pdf).

Было реализовано три фильтра, детектирующих признаки поребриков:

1.  Direction Change Filter ([1])
2.  Elevation Filter ([1])
3.  Continuous Filter ([1], [2] - реализация не дала значительного результата)

Для работы с .ply файлами используется скрипт, взятый из репозитория [RandLA-Net](https://github.com/WeikaiTan/RandLA-Net). Он был оставлен в исходном виде, без форматирования по PEP-8.

### Результаты и возможные улучшения
До применения фильтров:
![До применения фильтров](https://github.com/margochud/curb_detection/blob/main/data/before.png)
После применения фильтров:
![ПОсле применения фильтров](https://github.com/margochud/curb_detection/blob/main/data/after.png)

Видно, что в результатах достаточно много False Positive значений, поэтому можно поработать с выбросами, к примеру, применить RANSAC (хотя не очень понятно, какую гипотезу взять, чтобы сохранить закругления поребриков на перекрестках).

Также из-за препятствий на пути лучей лидара (например, машин), некоторые участки поребрика не детектируются. С этим можно попробовать работать методами из статьи [1].
